import{d as $,r as l,c as t,a as s,k as C,h as g,p as L,s as N,t as e,w as S,m as _,i as w,z as k,u as d,y as B,b as o,_ as E}from"./index-B-2F0aU2.js";import{u as R}from"./useAuth-BiuJZltg.js";const T={class:"login-page"},q={class:"login-card"},D={class:"hint"},H=["disabled"],I={key:0},M={key:1},U={key:0,class:"error"},z={key:1,class:"error"},A={key:2,class:"success"},j=$({__name:"LoginView",setup(F){const y=B(),p=R(),{loading:f}=p,m=p.error,r=l(""),n=l(""),u=l(null),v=l(!1),i=l(!1),b=async()=>{u.value=null,v.value=!1,i.value=!0;try{if(!r.value||!n.value){u.value="Completa usuario y contraseña.";return}await p.login({username:r.value,password:n.value}),n.value="",v.value=!0,await y.push({name:"home"})}catch{u.value=m.value??"No se pudo iniciar sesión."}finally{i.value=!1}};return(a,c)=>{const V=N("RouterLink");return o(),t("div",T,[s("section",q,[C(V,{class:"back-link",to:"/"},{default:L(()=>[_(" ← "+e(a.$t("auth.backHome")),1)]),_:1}),s("h1",null,e(a.$t("auth.loginTitle")),1),s("p",D,e(a.$t("auth.loginHintLong")),1),s("form",{class:"login-form",onSubmit:S(b,["prevent"])},[s("label",null,[_(e(a.$t("auth.username"))+" ",1),w(s("input",{"onUpdate:modelValue":c[0]||(c[0]=h=>r.value=h),name:"username",autocomplete:"username",required:""},null,512),[[k,r.value,void 0,{trim:!0}]])]),s("label",null,[_(e(a.$t("auth.password"))+" ",1),w(s("input",{"onUpdate:modelValue":c[1]||(c[1]=h=>n.value=h),type:"password",name:"password",autocomplete:"current-password",required:""},null,512),[[k,n.value]])]),s("button",{type:"submit",disabled:d(f)||i.value},[d(f)||i.value?(o(),t("span",I,e(a.$t("auth.signingIn")),1)):(o(),t("span",M,e(a.$t("auth.loginCta")),1))],8,H)],32),u.value?(o(),t("p",U,e(u.value),1)):d(m)?(o(),t("p",z,e(d(m)),1)):g("",!0),v.value?(o(),t("p",A,e(a.$t("auth.loginSuccess")),1)):g("",!0)])])}}}),K=E(j,[["__scopeId","data-v-74de0317"]]);export{K as default};
